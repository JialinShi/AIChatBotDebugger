# Project
Author: `Jialin Shi`

Live website: http://ec2-18-222-52-169.us-east-2.compute.amazonaws.com/bot/

## Description
- This AIChatBotDebugger application integrates with gpt-4o-mini from OpenAI, specifically customized for debugging. 
- You can either copy and paste your error log to this chat bot or simply upload your error log file for diagnosing. 
- Feel free to iteract with this chat bot and provide more detailed context so that it is able to help you better in the investigation. 

### Flask Web Application - [appy.py](https://github.com/JialinShi/AIChatBotDebugger/blob/main/app.py)

This Python module integrates OpenAI's GPT model with a Flask web application to offer various functionalities, including chat interactions, error log analysis, and file handling. It leverages Flask sessions, secure file handling, and custom logging mechanisms to enhance the application's capabilities.

The application is structured around several key components and endpoints:

- **Configuration and Initialization**:
  - The Flask app is configured with a secret key and session management to enhance security and maintain state across requests. It loads API configurations from a `config.yaml` file, initializing the OpenAI client with the retrieved API key.

- **Endpoints**:
  - **GET `/bot`**:
    - **Function**: `index()`
    - **Description**: Serves the basic landing page of the chatbot from `index.html`.
  
  - **POST `/bot/chat`**:
    - **Function**: `chat()`
    - **Description**: Handles chat functionality by receiving user messages and returning responses generated by the OpenAI's GPT model. It expects JSON input containing the user's message.
  
  - **POST `/bot/analyze`**:
    - **Function**: `analyze()`
    - **Description**: Processes error logs submitted through a form. If a log error is present, it analyzes the content and displays the results on `result.html`. If no log is submitted, it redirects to the index page.
  
  - **POST `/bot/upload`**:
    - **Function**: `upload()`
    - **Description**: Manages file uploads, validating file types and handling the contents securely. It updates the session's history with the user's actions and analyzes the uploaded log file.
  
  - **POST `/bot/clear`**:
    - **Function**: `clear_chat()`
    - **Description**: Clears the chat history stored in the session, resetting the chat environment.
  
  - **GET `/bot/test`**:
    - **Function**: `test()`
    - **Description**: Provides a simple endpoint to test the server's response, useful for health checks and debugging.

### Security Features
- The application uses Flask's `Session` to maintain state and manage user sessions securely.
- It handles file uploads with caution, using `secure_filename` to sanitize file names and checking file extensions to prevent the upload of unauthorized file types.

### File Handling
- The application supports file uploads, specifically allowing `.txt` and `.log` files, which are handled securely.

### Error Handling and Logging
- Custom logging helpers are utilized to log application errors, enhancing the debugging process and maintaining robust error management.

### Execution
- The application is set to run in debug mode for development purposes, facilitating real-time updates and detailed error logs.

This documentation outlines the structure and functionalities of the Flask web application integrating OpenAI's chatbot, providing clarity on its operation and endpoints. Each component is described with its purpose and interaction flow, ensuring comprehensive understanding and ease of maintenance.




## Getting started

### Prerequsite (MacOS)
1. Python 3.10 installed  
```
brew install python@3.10
```
   
2. Dependency installed  
```
pip install flask openai langchain boto3
```
   
3. OpenAI token acquired  
Go to [OpenAI api-key](https://platform.openai.com/settings/profile?tab=api-keys) to request for a api key for personal use

### Steps to deploy locally 
   
1. Clone this repo to the local  

```
git colone https://github.com/JialinShi/AIChatBotDebugger.git
```

2. go to project folder  
```
cd AIChatBotDebugger
```

4. create a file named `config.yaml`, add one line to this file to configure your api token get from OpenAI  
```
open_ai_token: '{your_OpenAI_token}'
``` 

6. Create a python virtual environment  
```
python3 -m venv venv
```

6. Start the python virtual environment     
```
source venv/bin/activate
```

7. Start the server  
```
python app.py
```

7. Open your browser and go to website `127.0.0.1:5000/bot`
